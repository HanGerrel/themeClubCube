"use strict";appMakeBeCool.gateway.addClass("FormSubscribe",function(e,a,s,r){function o(){if(appMakeBeCool.gateway.base.Class.apply(c,[l]),!n.preloaded)return c.init();c.globals.customCreate=function(){t(),i(),u(),f()},c.create()}var c=this,l=a.extend({form:"#email-footer-form",formSuccessMessage:"#successSubscribe",formSuccessLoader:"#loaderSubscribeForm"},e),n={form:null,formSuccessMessage:null,formSuccessLoader:null,preloaded:!1},t=function(){n.form=a(l.form),n.formSuccessMessage=a(l.formSuccessMessage),n.formSuccessLoader=a(l.formSuccessLoader)},i=function(){n.form.length&&(n.form.validate({errorElement:"span",errorPlacement:function(e,s){var r,o;a(s).hasClass("error")&&!a("label[for="+a(s).attr("id")+"]").length?((r=a("<label/>")).addClass("error").attr("for",a(s).attr("id")),(o=a("<span/>")).addClass("subscribe-label-arrow"),e.addClass("subscribe-label-inner").removeClass("error"),e.insertAfter(s).wrap(r),o.insertBefore(e)):a(s).hasClass("valid")&&a(e).parent("label").remove()},success:function(e){a("label[for=email-subscribe]").remove()}}),n.form.ajaxForm({dataType:"json",beforeSubmit:d,success:m}))},u=function(){},f=function(){c.globals.customResurrect=function(){},c.globals.customDestroy=function(){}},d=function(e,s,r){n.formSuccessLoader.removeClass("hide")},m=function(e){if(e.success)n.form.slideUp("slow",function(){n.formSuccessMessage.slideDown("slow")});else for(var s in n.formSuccessLoader.addClass("hide"),e.errors){a("#"+s).addClass("error")}};c.addMethod("init",function(){c.bind(s,c.globals.classType+"_Init",function(e,s,r){n.preloaded=!0,o()})}),o()});