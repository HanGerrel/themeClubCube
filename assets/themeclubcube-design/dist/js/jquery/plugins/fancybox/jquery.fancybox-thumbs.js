!function(d){d.fancybox.helpers.thumbs={defaults:{width:50,height:50,position:"bottom",className:function(t){var i;return t.element&&(i=d(t.element).find("img").attr("class")),i},source:function(t){var i;return t.element&&(i=d(t.element).find("img").attr("src")),!i&&"image"===t.type&&t.href&&(i=t.href),i}},wrap:null,list:null,width:0,init:function(t,i){for(var a=this,l=t.width,r=t.height,h=t.source,s=t.className,e="",n=0;n<i.group.length;n++)e+='<li><a style="width:'+l+"px;height:"+r+'px;" href="javascript:jQuery.fancybox.jumpto('+n+');"></a></li>';this.wrap=d('<div id="fancybox-thumbs" class="fancybox-thumbs"><div id="fancybox-thumbs-inner" class="fancybox-thumbs-inner"></div></div>').addClass(t.position).appendTo("body"),this.list=d("<ul>"+e+"</ul>").appendTo(this.wrap.find("#fancybox-thumbs-inner")),d.each(i.group,function(n){var t=h(i.group[n]),o=s(i.group[n]);t&&d("<img />").load(function(){var t,i,h,s=this.width,e=this.height;this.className;a.list&&s&&e&&(t=s/l,i=e/r,h=a.list.children().eq(n).find("a"),1<=t&&1<=i&&(e=i<t?(s=Math.floor(s/i),r):(s=l,Math.floor(e/t))),d(this).css({width:s,height:e,top:Math.floor(r/2-e/2),left:Math.floor(l/2-s/2)}),d(h).addClass(o),h.width(l).height(r),d(this).hide().appendTo(h).fadeIn(300))}).attr("src",t)}),this.width=this.list.children().eq(0).outerWidth(!0),this.list.width(this.width*(i.group.length+1)).css("left",Math.floor(.5*d(window).width()-(i.index*this.width+.5*this.width))),d("#fancybox-thumbs-inner").css({"margin-left":-(d(window).width()-d("#fancybox-thumbs").width())/2})},beforeLoad:function(t,i){i.group.length<2?i.helpers.thumbs=!1:i.margin["top"===t.position?0:2]+=t.height+15},afterShow:function(t,i){this.list?this.onUpdate(t,i):this.init(t,i),this.list.children().removeClass("active").eq(i.index).addClass("active")},onUpdate:function(t,i){this.list&&(this.list.stop(!0).animate({left:Math.floor(.5*d(window).width()-(i.index*this.width+.5*this.width))},150),d("#fancybox-thumbs-inner").css({"margin-left":-(d(window).width()-d("#fancybox-thumbs").width())/2}))},beforeClose:function(){this.wrap&&this.wrap.remove(),this.wrap=null,this.list=null,this.width=0}}}(jQuery);